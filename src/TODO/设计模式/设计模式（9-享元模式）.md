---
title: MySQL（3-事务和日志）
tags: MySQL
categories: 数据库
cover: /img/index/mysql.png
top_img: /img/index/mysql.png
published: false
abbrlink: 63240
date: 2024-11-22 22:38:34
description:
---

共享元对象，运用共享技术有效地支持大量细粒度对象的复用。如果在一个系统中存在多个相同的对象，那么只需要共享一份对象的拷贝，而不必为每一次使用创建新的对象

```java
public interface Shape {
    void draw();
}

@Data
public class Circle implements Shape{
    private String color;
    private int x;
    private int y;
    private int radius;
}
```

```java
public class ShapeFactory {
    private static final HashMap<String,Shape>circleMap=new HashMap<>();

    public static Shape getCircle(String color){
        Circle circle=(Circle) circleMap.get(color);

        if (circle==null){
            circle=new Circle(color);
            circleMap.put(color,circle);
            System.out.println("Creating circle of color:"+color);
        }
        return circle;
    }
}
```

```java
public class FlyweightPatternDemo {
    private static final String colors[]=
            {"Red","Green","Blue","White","Black"};

    public static void main(String[] args) {
        for (int i = 0; i < 20; i++) {
            Circle circle=(Circle)ShapeFactory.getCircle(getRandomColor());
            circle.setX(getRandomX());
            circle.setY(getRandomY());
            circle.setRadius(100);
            circle.draw();
        }
    }

    private static String getRandomColor(){
        return colors[(int)(Math.random()*colors.length)];
    }

    private static int getRandomX(){
        return (int)(Math.random()*100);
    }

    private static int getRandomY(){
        return (int)(Math.random()*100);
    }
}
```
