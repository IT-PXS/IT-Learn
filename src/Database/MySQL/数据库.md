---
title: MySQL（基础知识）
tags: MySQL
categories: 数据库
cover: /img/index/mysql.png
top_img: /img/index/mysql.png
description: >-
  MySQL是一个广泛使用的开源关系型数据库管理系统，适用于多种应用场景。MySQL基础知识涵盖数据库和表的创建与管理、数据类型、常用SQL语句（如SELECT、INSERT、UPDATE、DELETE等）及其使用方法。
published: false
abbrlink: 40028
date: 2024-11-09 22:38:34
---

### 基本概念

1. 数据（data）：data
2. 数据库（DB）：DataBase
3. 数据库管理系统（DBMS）：DataBase Management System
4. 数据库系统（DBS）：DataBase System，由数据库、硬件、软件和人员组成
5. 数据库管理员（DBA）：DataBase Administrator

#### DBMS功能
1. 数据定义
2. 数据库操作
3. 数据库运行管理
4. 数据的组织、存储和管理
5. 数据库的建立和维护

#### DBMS特征
1. 数据结构化且统一管理
2. 有较高的数据独立性
3. 数据控制功能（数据库的完全性、完整性、并发控制、故障恢复）

#### 模型分类
1. 层次模型：用树型（层次）结构表示实体类型及实体之间联系的数据模型称为层次模型。层次结构是一棵树，树的结点是记录类型，非根结点有且只有一个父结点。上一层记录类型和下一层记录类型的联系是1：M联系。
2. 网状模型：用从结构（网络结构）表示实体类型及实体间联系的数据模型称为网状模型。记录之间的联系通过指针实现，M：N联系容易实现（一个M：N联系可拆成两个1：M联系），查询效率高。
3. 关系模型：用规范化了的二维表格结构表示实体集，用键表示实体间联系。通常是若干个关系模型组成的集合。

#### 关系
关系实际上就可以看作是一个二维表。其中，表的每一列称为属性，并用属性名来标识。每个属性的取值范围，就是该属性所对应的值域。表的每一行称为元组。约定该表的行、列的次序的改变，不改变关系的语义性质。

##### 性质
对于一个关系，应该具备下列性质：

1. 关系中每一个属性值都是不可分解的；
2. 关系中不允许出现相同的元组；不让用户考虑元组的顺序；
3. 用户在使用时不用考虑列的顺序。

##### 约束
在关系模型中，数据的约束条件通过三类完整性约束条件来描述。即：

1. 实体完整性：要求关系中的元组的主键值不能是空值。
2. 参照完整性：要求在关系中不允许引用不存在的实体。
3. 用户定义的完整性：这是针对某一具体数据的约束条件，由应用环境决定，例如属性的值限制。

#### 三级模式、两级映像
![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691582717637-cc2cf6e9-1e3a-4b9b-a305-a5c3ad0755a3.png)

##### 三级模式
1. 模式（概念模式、逻辑模式）：是数据库中全体数据的逻辑结构和特征的描述，只涉及型的描述，不涉及具体的值。
2. 外模式（用户模式、子模式）：是用户与数据库系统的接口，是用户看到的那部分数据的描述。描述外模式的数据定义语言为外模式DDL
3. 内模式（存储模式）：是数据物理结构和存储方式的描述，是数据在数据库内部的表示方法，定义所有的内部记录类型、索引和文件的组织方法，以及数据控制方面的细节。描述内模式的数据定义语言为内模式DDL

注意：

1. 外模式-模式-内模式分别对应：视图-基本表-文件（一个数据库系统中，外模式可以有多个，而模式和内模式只能有一个）
2. 如果对数据库的一张表创建聚簇索引，意味着重新确定表中数据的物理顺序，即需要改变的是数据库的内模式

##### 两级映像
1. 模式/内模式映像：存在于概念级和内部级之间，实现了模式和内模式之间的相互转换，保证了数据的物理独立性
2. 外模式/模式映像：存在于外部级和概念级之间，实现了外模式和模式之间的相互转换，保证了数据的逻辑独立性

### 数据库设计过程
![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691582844437-14471222-5df6-4db4-a1b0-a12906c1b8ff.png)

#### 需求分析
##### 需求说明文档
##### 数据流图
##### 数据字典
1. 数据项：是不可再分的数据单位

数据项描述={数据项名，数据项含义说明，别名，数据类型，长度，取值范围，取值含义，与其他数据项的逻辑关系，数据项之间的联系}

2. 数据结构：反映了数据之间的组合关系（一个数据结构可以由若干个数据项组成，也可以由若干个数据结构组成，或由若干个数据项和数据结构混合组成）

数据结构描述={数据结构名，含义说明，组成：{数据项或数据结构}}

3. 数据流：是数据结构在系统内传输的路径

数据流描述={数据流名，说明，数据流来源，数据流去向，组成：{数据结构}，平均流量，高峰期流量}

4. 数据存储：是数据结构停留或保存的地方，也是数据流的来源和去向之一

数据存储描述={数据存储名，说明，编号，输入的数据流，输出的数据流，组成：{数据结构}，数据量，存取频度，存取方式}

5. 处理过程

处理过程描述={处理过程名，说明，输入：{数据流}，输出：{数据流}，处理：{简要说明}}

#### 概念结构设计
##### 实体关系
+ 实体之间联系

![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691582977378-4988eb83-a365-4fac-8364-b1117fe19efa.png)

+ 两个以上的实体之间的联系

![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691582988700-a3660c6f-102c-472f-b2bd-e18943af5595.png)

+ 单个实体内的联系

![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691582995970-fd1d97cd-f8c9-4e42-a473-376390aa3aab.png)

##### E-R图
1. 实体型：用矩形表示，矩形框内写明实体名
2. 属性：用椭圆形表示，并用无向边将其与相应的实体型连接起来
3. 联系：用菱形表示，菱形框内写明联系名，并用无向边分别与有关实体型连接起来，同时在无向边旁标上联系的类型（1:1、1:n、m:n）

![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691583470349-1def2619-9960-46f7-8bc3-b8ef539d5143.png)

![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691583478598-9cb4048a-f73f-4b0d-b9e4-89308eb44f54.png)

##### E-R图简化
为了简化 E-R 图的处置，现实世界的事物能作为属性对待的，尽量作为属性对待。

1. 作为属性，不能再具有需要描述的性质，即属性必须是不可分的数据项，不能包含其他属性
2. 属性不能与其他实体具有联系，即E-R图中所表示的联系是实体之间的联系

例如：职称如果没有与工资、福利挂钩，即没有需要进一步描述的特性，则根据准则（1）可以作为职工实体的属性

![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691583871461-8a1a94f2-6a12-4d74-b6a7-11676bf0f306.png)

##### E-R图集成
![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691584502752-7502e9a9-f26e-49a2-806c-4ac685108baf.png)

1. 合并
2. 修改和重构
+ 属性冲突
+ 命名冲突
+ 结构冲突

#### 逻辑结构设计
##### E-R图向关系模式转换
![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691674874355-3f7b1139-faf9-4871-bf82-b83def744f79.png)

仓库和商品之间是M:N的关系

1. 库存 （仓库号，商品号，日期，库存量）
2. 商品（商品号，商品名，单价）
3. 仓库（仓库号，仓库名，地址）

这样就实现了从概念模型到关系模型的转换（后面需要将主键和外键标注）

##### 数据模型的优化
1. 确定数据依赖
2. 对于各个关系模式之间的数据依赖进行极小化处理，消除冗余的联系
3. 按照数据依赖的理论对关系模式逐一进行分析，考察是否存在部分函数依赖、传递函数依赖、多值依赖等，确定各关系模式分别属于第几范式
4. 根据需求分析阶段得到的处理要求，分析对于这样的应用环境这些模式是否合适，确定是否要对某些模式进行合并或分解
5. 对关系模式进行必要分解，提高数据操作效率和存储空间的利用率

##### 设计用户子模式
1. 使用更符合用户习惯的别名
2. 针对不同级别的用户定义不同的视图，以保证系统的安全性。例如：为一般顾客建立视图：产品1（产品号，产品名，规格，单价）；为产品销售部门建立视图：产品2（产品号，产品名，规格，单价，车间，生产负责人）
3. 简化用户对系统的使用。例如：如果某些局部应用中经常要使用某些很复杂的查询，为了方便用户，可以将这些复杂查询定义为视图。

#### 物理结构设计
##### 关系模式存取方法选择
1. B+树
2. hash索引
3. 聚簇索引

##### 确定数据库的存储结构
1. 确定数据的存放位置
2. 确定系统配置

#### 数据库实施
#### 数据库运行和维护
### 关系代数
![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691681110619-2dcde946-9992-49b6-8ab2-3203c6b5ad04.png)

#### 并
具有相同的目n（两个关系都有n个属性），R和S的并是由属于R 或属于S的元组组成的集合，记为R∪S（R∪S = { t | t∈R∨t∈S }）

![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691681951041-a3974529-e84e-440b-8919-6b13d5a2a0ea.png)

#### 差
关系R和S具有相同的目n，R和S的差是由属于R但不属于S的元组组成的集合，记为R-S（R -S = { t| t∈R∧t∉S }）

![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691682097860-ea5fcfff-f84b-47ea-8c6c-c500a9e9a139.png)

#### 交
关系R和S具有相同的目n，R和S的交是由既属于R又属于S的元组组成的集合，记为R∩S（R∩S = { t| t∈R∧t∈S }、R∩S = R – (R-S）、R∩S = S – (S-R））

![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691682302348-81ca42c1-fe30-4cc4-bed6-85988c048ef0.png)

#### 笛卡尔积
#### 投影
![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691682302336-faee2323-c50b-4de8-90f2-e0aad1c5545c.png)

#### 选择
![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691682302351-c1e3156a-ca5d-44aa-a074-25120482c32a.png)

#### θ连接
![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691682302706-f90d6077-c1e6-4e1a-8f59-0676efb83385.png)

1.  一般连接

![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691830586266-f41bd1cd-3003-44b7-9dd6-72cb1270f157.png)

2. 等值连接

![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691830592960-c28fef04-c969-4fb1-81c2-f2a16bb581b7.png)

![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691830607876-c433c21b-6e0f-4548-85bb-2096a0124d07.png)

3. 自然连接

![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691830636983-a36a33b5-6480-4a3f-9a65-15760f04fa05.png)

4. 外连接

关系R、S 进行自然连接时，如果把舍弃的元组也保存在结果关系中，而在其他属性上填空值(Null)，这种连接就叫做外连接

![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691830664274-0184f34e-ab89-480d-be71-4cc56537b3c9.png)

5. 左外连接

关系R、S 进行自然连接时，如果只把左边关系R中要舍弃的元组保留就叫做左外连接(LEFT OUTER JOIN或LEFT JOIN)

![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691830685067-55b1738c-07ef-4d8a-abc6-f6f48f7f0659.png)

6. 右外连接

关系R、S 进行自然连接时，如果只把右边关系S中要舍弃的元组 保留就叫做右外连接(RIGHT OUTER JOIN或RIGHT JOIN)

![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691830708846-6db1ff76-34c1-4aa8-bd18-25d2b11793c3.png)

#### 除法
![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691831487604-4d1b5157-83e8-404e-9739-544f01e01a9f.png)

![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691830917435-b9d8e136-4b6e-4382-8cbe-97ab80424a41.png)

### 规范化理论
#### 函数依赖
1. 函数依赖

A->B，如果通过A属性（属性组）的值，可以确定唯一B的值，则称B依赖于A

例如：学号->姓名，（学号，课程名称）->分数

2. 完全函数依赖

A->B，如果A是一个属性组，则B属性值的确定需要依赖于A属性组所有的值

例如：（学号，课程名称）->分数，需要根据学号和课程名称才能确定分数

3. 部分函数依赖

A->B，如果A是一个属性值，则B属性值的确定需要依赖于A属性组某些值就行了

例如：（学号，课程名称）->姓名，学号和课程名称并不是A属性组里面的所有值

4. 传递函数依赖

A->B，B->C，如果通过A属性（属性组）的值，可以确定唯一B属性的值，再通过B属性（属性组）的值可以确定唯一C属性的值，则称C传递函数依赖于A

例如：学号->系名，系名->班主任

#### 函数规则
![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691892448064-0ee46aae-4321-44e5-9875-3436d039f6a7.png)

![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691892462140-8ba3addd-8fcd-4848-a867-b2d3d05ad3e6.png)

#### 码
1. 候选码（候选键）：若关系模式中的某一属性或属性组能唯一地标识一个元组，则称该属性或属性组为候选码（是最小超键，即没有多余元素的超键）。

例如：学号->性别、姓名，所以学号是学生关系模式的候选码

2. 主码（主键）：数据库表中对存储数据对象予以唯一和完整标识的数据列或属性的组合。一个数据列只能有一个主键，且主键的取值不能缺失，即不能为空值NULL（若一个关系模式有多个候选码，则选定其中一个为主码）

例如：学号->姓名，身份证号->姓名，所以可以选择学号作为主码

3. 超码（超键）：在关系中，能唯一标识元组的属性集称为关系模式的超键。一个属性可以作为一个超键，多个属性组合在一起也可以作为一个超键，超键包含候选键和主键

例如：学号->性别，那么（学号,姓名）->性别也是可以唯一确定的，所以可以称为学生关系模式的超码

4. 外码（外键）：在一个表中存在另一个表的主键称此表的外键，外键可以有重复的，可以是空值，外键是用来和其他表建立联系用的
5. 全码：如果在一个关系模式中，需要所有的属性才可以唯一标识其中的每一个元组，那么称这个属性组为全码
6. （非）主属性：包含在任何一个候选码中的所有属性称为主属性，反之称为非主属性

<font style="background-color:#FBDE28;">候选码求取理论</font>

根据函数依赖，把属性分成四类

+ L：只在函数依赖左侧
+ R：只在函数依赖右侧
+ LR：出现在函数依赖两侧
+ N：没有出现过的

求解方法：

+ 只在FD右部出现的属性，不属于候选码
+ 只在FD左部出现的属性，一定存在于某候选码当中
+ 外部属性一定存在于任何候选码当中; (左右都不出现)
+ 其他属性逐个与2、3的属性组合，求属性闭包，直至X的闭包等于U，若等于U，则X为候选码。

#### 数据库范式
1. 第一范式：强调的是列的原子性，即数据库表的每一列都是不可分割的原子数据项，不能是集合、数组、记录等非原子数据项
2. 第二范式：在1NF上，要求实体的属性完全依赖于主关键字。所谓完全依赖是指不能存在仅依赖码一部分的属性，必须是依赖全部属性（消除部分依赖）
3. 第三范式：在2NF上，任何非主属性不依赖于其他非主属性（在2NF基础上消除传递依赖）
4. BCNF：关系模式R（U，F）∈1NF，若X->Y且Y不包含于X时，X必含有码，则R∈BCNF
+ 所有非主属性对每一个码都是完全函数依赖
+ 所有主属性对每一个不包含它的码是完全函数依赖
+ 没有任何属性完全函数依赖于非码的任何一组属性

BCNF判断方法：X→Y时，X一定含有码（候选码中的任意一个，不能只是一个属性、部分码）

例如：在关系模式STJ（S，T，J）中，S表示学生，T表示教师，J表示课程。

每一教师只教一门课。每门课由一名教师教，某一学生选定某门课，就确定了一个固定的教师，某个学生选修某个教师的课就确定了所选课的名称：(S，J)→T，(S，T)→J，T→J

#### 闭包
1. 逻辑蕴涵：F能推出原本不存在于F中的函数依赖，则该函数依赖为F所逻辑蕴含的函数依赖
2. R<U,F>中，U为R中的一组属性，F为属性值U上的一组数据依赖（即为函数依赖集）
3. 设X是函数依赖集，被X逻辑蕴涵的函数依赖全体构成的集合，称为函数依赖集X的闭包，记为X<sup>+</sup>（在关系模式R<U，F>中为F所逻辑蕴含的函数依赖的全体叫做F的闭包）

例如：属性集U为ABCD，F集为{A→B,B→C,D→B}。求A<sup>+</sup>，（AD）<sup>+</sup>，（BD）<sup>+</sup>

A推出B，B推出C，所以A的闭包为ABC；AD，BD同理可得。（即：A<sup>+</sup>=ABC，（AD）<sup>+</sup>=ABCD，（BD）<sup>+</sup>=BCD）

#### 最小函数依赖集
如果函数依赖集F满足下列条件，则称F为一个极小函数依赖集（最小依赖集或最小覆盖）

1. F中任一函数依赖右部仅含有一个属性
2. F中不存在这样的函数依赖X->A，使得F与F-{X->A}等价
3. F中不存在这样的函数依赖X->A，X有真子集Z使得F-{X->A}U{Z->A}与F等价

解法：

1. 应用分解规则，使F中每一个依赖的右部属性单一化。
2. 去掉各依赖左部多余的属性。具体做法是：一个一个地检查F中左边是非单属性的依赖，例如XY->A。现在要判断Y是否为多余的，即以X->A代替XY->A是否等价。只要在F中求X<sup>+</sup>，若X<sup>+</sup>包含A，则Y是多余的属性，否则Y不是多余属性。依次判断其他属性即可消除各依赖左边的多余属性。
3. 去掉多余的依赖。具体做法是：从第一个依赖开始，从F中去掉它（假设该依赖为X->Y)，然后在剩下的依赖中求X<sup>+</sup>，看X<sup>+</sup>是否包含Y，若是，则去掉X->Y;若不包含Y则不能去掉X->Y。

![](https://raw.githubusercontent.com/kelo7/PictureOfNotebook/master/20200609122219564.png)

![](https://raw.githubusercontent.com/kelo7/PictureOfNotebook/master/20200609122230493.png)

<font style="background-color:#FBDE28;">投影算法</font>

例如：假设有关系R(A,B,C,D,E)和FD集{AB->DE,C->E,D->C,E->A}，假设要把这些FD投影到S(A,B,C)，求出在S上成立的FD集合

第一步：将原来的FD转换成右边只有一个的情况

+ AB->D，AB->E，C->E，D->C，E->A

第二步：通过直接观察，或传递依赖，找到S(A,B,C)上的函数依赖

+ AB->D->C，即AB->C
+ C->E->A，即C->A

所以在S上成立的FD集合为{AB->C,C->A}

#### 模式分解
模式分解的定义：

1. 分解具有“无损连接性”
2. 分解要“保持函数依赖”
3. 分解既要“保持函数依赖”，又要具有“无损连接性”。

假设一个关系模式R（A，B，C），函数依赖集F={A->B，B->C}，可以将关系模式R分解为R1（A，B）、R2（B，C），那么在R1中，我们能够找出A->B，在R2中，我们能够找出B->C，这与原函数依赖集完全对应，称这样的模式分解保持函数依赖（换句话说，对于一个总关系模式分解成了若干个子关系模式，如果根据这些子关系模式中的属性能够推出与原函数依赖集相同的内容，则称保持函数依赖）

1. 无损分解：能还原的关系模式
2. 有损分解：不能还原的关系模式

##### 无损连接分解的检测方法
设有关系模式R(A1，A2，.....An)，F为它的函数依赖集，p={R1，R2，.....Rn}为R的一个分解

1. 构造初始表：构造一个k行n列的初始表，其中每列对应于R的一个属性，每行用于表示分解后的一个模式组成。如果属性A<sub>j</sub>属于关系模式R<sub>i</sub>，则在表的第一i行第j列置符号a<sub>j</sub>，否则置符号b<sub>ij</sub>
2. 根据F中的函数依赖修改表内容：考察F中的每个函数依赖X->Y，在属性组X所在的那些列上寻找具有相同符号的行，如果找到这样的两行或更多的行，则修改这些行，则使这些行上属性组Y所在的列上元素相同。（修改规则：如果y所在的要修改的行中有一个为a<sub>j</sub>，则这些元素均变成a<sub>j</sub>；否则改动为b<sub>mj</sub>【其中m为这些行的最小行号】）
3. 判断分解是否为无损依赖：如果通过修改，发现表中有一行变为a1，a2....an，则分解是无损联接的，否则分解不具有无损联接性。

注意：若某个b<sub>ij</sub>被改动，则该列中凡是与b<sub>ij</sub>相同的符号均做相同的改动。循环地对F中的函数依赖进行逐个处理，直到发现表中有一行变为a1，a2......an或不能再被修改为止。

例如：已知R<U,F>，U={A,B,C,D,E}，F={A→C,B→C,C→D,DE→C,CE→A}，R的一个分解为R1(AD)，R2(AB)，R3(BE)，R4(CDE)，R5(AE)，判断这个分解是否具有无损连接性。

+ 构造一个初始的二维表，若“属性”属于“模式”中的属性，则填aj，否则填bij

![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691828526543-d21a913a-b478-4a31-877a-22f99b35db22.png)

+ 根据A→C，对上表进行处理，由于属性列A上第1、2、5行相同均为a1，所以将属性列C上的b13、b23、b53改为同一个符号b13（取行号最小值）。

![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691828545650-ffaaedcd-5b7b-4fc7-8b98-f3cc970b16aa.png)

+ 根据B→C，对上表进行处理，由于属性列B上第2、3行相同均为a2，所以将属性列C上的b13、b33改为同一个符号b13（取行号最小值）

![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691828566087-f61f846b-5d7b-4ab9-814c-3bdc2e466010.png)

+ 根据C→D，对上表进行处理，由于属性列C上第1、2、3、5行相同均为b13，所以将属性列D上的值均改为同一个符号a4

![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691828585154-e2413d40-e6ad-4df2-8327-43748b3dda83.png)

+ 根据DE→C，对上表进行处理，由于属性列DE上第3、4、5行相同均为a4a5，所以将属性列C上的值均改为同一个符号a3

![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691828600908-b5ce5e02-c8b1-489e-b0c3-df7452e3997a.png)

+ 根据CE→A，对上表进行处理，由于属性列CE上第3、4、5行相同均为a3a5，所以将属性列A上的值均改为同一个符号a1

![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691828623087-f1ecaaa3-6174-4725-9753-6e206ecdbaa1.png)

+ 通过上述的修改，使第三行成为a1a2a3a4a5，则算法终止。且分解具有无损连接性。

##### 无损连接检测（无损连接定理）
![](https://cdn.nlark.com/yuque/0/2023/jpeg/12836966/1691829310771-3bbdc278-d037-4d0c-aa8c-6c0b52e5a3f9.jpeg)

例如：关系模式R（SAIP），F={S->A,SI->P};  ρ={R1(SA),R2(SIP)}

因为：R1∩R2=S ；R1-R2=A； R2-R1=IP；所以得出：S->A；或者S->IP； 而 S->A 在F={S->A,SI->P}中，所以此分解是无损连接

### 数据库控制
#### 数据库安全
1. 用户标识和鉴定：最外层的安全保护措施，可以使用用户账户、口令及随机数检验等方式
2. 存取控制：对用户进行授权，包括操作类型（如查找、插入、删除、修改等动作）和数据对象（主要是数据范围）的权限
3. 密码存储和控制：对远程中断信息用密码传输
4. 视图的保护：对视图进行授权
5. 审计：使用一个专用文件或数据库，自动将用户对数据库的所有操作记录下来

#### 数据库备份
1. 热备份（动态备份）：是利用备份软件，在数据库正常运行的状态下，将数据库中的数据文件备份出来
2. 冷备份（静态备份）：是将数据库正常关闭，在停止状态下，将数据库的文件全部备份（复制）下来

根据备份数据的量来分为：

1. 完全备份：备份所有的数据
2. 差量备份：仅备份上一次完全备份之后变化的数据
3. 增量备份：备份上一次备份之后变化的数据

根据状态分为：

1. 静态海量转储：在系统中无运行事务时进行，每次转储全部数据库
2. 静态增量转储：在系统中无运行事务时进行，每次只转储上一次转储后更新过的数据
3. 动态海量转储：转储期间允许对数据库进行存取或修改，每次转储全部数据库
4. 动态增量转储：转储期间允许对数据库进行存取或修改，每次只转储上一次转储后更新过后的数据

#### 日志文件
事务日志是针对数据库改变所做的记录，它可以记录针对数据库的任何操作，并将记录结构保存在独立的文件中

注意：要求遵循“先写日志文件，然后再写数据库的修改”

#### 数据库故障与修复
![](https://cdn.nlark.com/yuque/0/2023/png/12836966/1691893869003-32c5d840-fc15-4b07-952d-55c3f92a5943.png)

### 数据仓库与数据挖掘
#### 分布式数据库
全功能分布式数据库系统的规则和目标：

1. 局部结点自治性：网络中的每个结点是独立的数据库系统，它有自己的数据库，运行它的局部DBMS，执行局部应用，具有高度的自治性。
2. 不依赖中心结点：即每个结点具有全局字典管理、查询处理、并发控制和恢复控制等功能。
3. 能连续操作：该目标使中断分布式数据库服务情况减至最少，当一个新场地合并到现有的分布式系统、或将分布式系统中撤离一场地不会导致任何不必要的服务中断；在分布式系统中可动态地建立和消除片段，而不中止任何组成部分的场地或数据库；应尽可能在不使整个系统停机的情况下对组成分布式系统的场地的DBMS进行升级。
4. 具有位置独立性(或称位置透明性)：用户不必知道数据的物理存储地，可工作得像数据全部存储在局部场地一样。一般位置独立性需要有分布式数据命名模式和字典子系统的支持。
5. 分片独立性(或称分片透明性)：分布式系统如果可将给定的关系分成若干块或片,可提高系统的处理性能。利用分片将数据存储在最频繁使用它的位置上，使大部分操作是局部操作，减少网络的信息流量。如果系统支持分片独立性，用户工作起来就像数据全然不是分片的一样。
6. 数据复制独立性：是指将给定的关系(或片段)可在物理级用许多不同存储副本或复制品在许多不同场地上存储。支持数据复制的系统应当支持复制独立性，用户工作可像它全然没有存储副本一样地工作。
7. 支持分布式查询处理：在分布数据库系统中有三类查询：局部查询、远程查询和全局查询。局部查询和远程查询仅涉及单个结点的数据(本地的或远程的)，查询优化采用的技术是集中式数据库的查询优化技术。全局查询涉及多个结点上的数据，其查询处理和优化要复杂得多。
8. 支持分布事务管理：事务管理有两个主要方面:恢复控制和并发控制。在分布式系统中，单个事务会涉及到多个场地上的代码执行，会涉及到多个场地上的更新，可以说每个事务是由多个“代理”组成，每个代理代表在给定场地上的给定事务上执行的过程。在分布式系统中须保证事务的代理集，或者全部一致交付，或者全部一致回滚。
9. 具有硬件独立性：希望在不同硬件系统上运行同样的DBMS。
10. 具有操作系统独立性：希望在不同的操作系统上运行DBMS。
11. 具有网络独立性：如果系统能够支持多个不同的场地,每个场地有不同的硬件和不同的操作系统,则要求该系统能支持各种不同的通信网络。
12. 具有DBMS独立性：实现对异构型分布式系统的支持。理想的分布式系统应该提供DBMS独立性。

上述的全功能分布式数据库系统的准则和目标起源于：一个分布式数据库系统，对用户来说，应当看上去完全像一个非分布式系统。

#### DDBS的基本特点
1. 物理分布性：数据不是存储在一个场地上，而是存储在计算机网络的多个场地上。
2. 逻辑整体性：数据物理分布在各个场地，但逻辑上是一个整体，它们被所有用户（全局用户）共享，并由一个DDBMS统一管理。
3. 场地自治性：各场地上的数据由本地的DBMS管理，具有自治处理能力，完成本场地的应用（局部应用）。
4. 场地之间协作性：各场地虽然具有高度的自治性，但是又相互协作构成一个整体。

